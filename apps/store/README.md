# 店舗POS向けアプリ

店舗スタッフ向けのアプリケーションです。注文受付、調理管理、配膳管理、会計処理を行います。

## 機能概要

店舗の日常オペレーションを支援するPOS機能を提供します。

## 技術スタック

- **Framework**: Next.js 14 (App Router)
- **Language**: TypeScript
- **Styling**: Tailwind CSS
- **Authentication**: JWT (localstorage)
- **Real-time Updates**: Polling
- **PWA**: オフライン対応（実装予定）

## セットアップ

### 開発サーバー起動

```bash
# 店舗POSアプリのみ起動
pnpm -F store dev

# または全アプリ起動
pnpm dev
```

アプリは http://localhost:3003 で起動します。

## ✅ 完了済み（基本機能）

### 認証
- [x] ログイン (`/login`)
- [x] JWT認証
- [x] セッション管理

### 注文作成 (`/order`)
- [x] メニュー一覧表示
- [x] メニュー選択
- [x] テーブル番号入力
- [x] 注文送信
- [x] カート機能

### 厨房ディスプレイ (`/kitchen`)
- [x] 注文キュー管理
- [x] ステータス更新（待機中→調理中→調理完了→配膳済み）
- [x] 注文詳細表示
- [x] リアルタイム更新

### テーブル管理 (`/tables`)
- [x] テーブル一覧表示
- [x] テーブル状態表示（空席・使用中）
- [x] 顧客案内時のセッション作成
- [x] 人数入力機能
- [x] 30秒自動更新
- [x] ビジュアルテーブルマップ表示
- [x] マップ/リスト表示切替
- [x] テーブル状態の色分け（緑=空席、赤=使用中）
- [x] テーブル形状設定（正方形・長方形・円形）

### 会計 (`/payment`)
- [x] テーブルセッション別会計
- [x] 合計金額表示
- [x] 会計処理
- [x] セッション終了処理
- [x] 会計履歴表示

### 店舗選択 (`/select-store`)
- [x] ログイン後の店舗選択画面
- [x] 店舗一覧表示
- [x] 店舗切り替え機能（ドロップダウン）
- [x] 選択した店舗情報の保存

### エラーハンドリング
- [x] ネットワーク状態監視機能
- [x] オフライン時の通知バー表示
- [x] API呼び出しの自動リトライ（指数バックオフ）
- [x] エラートースト通知コンポーネント
- [x] リトライ可能エラーの判定（500番台）

## 今後の実装予定（拡張機能）

### 🎨 優先度：中

#### 1. PWA対応
- [ ] オフライン動作
- [ ] ローカルストレージ活用
- [ ] ホーム画面に追加
- [ ] プッシュ通知

#### 2. プリンター連携
- [ ] 厨房プリンター自動出力
- [ ] レシートプリンター連携
- [ ] 印刷設定管理

#### 3. 売上日報
- [ ] 日次締め処理
- [ ] 売上サマリー表示
- [ ] レポート印刷

---

### 📊 優先度：低

#### 4. 在庫確認
- [ ] リアルタイム在庫確認
- [ ] 品切れ通知
- [ ] 在庫アラート

#### 5. スタッフ機能拡張
- [ ] シフト確認
- [ ] 勤怠打刻
- [ ] メッセージング機能

## ライセンス

このプロジェクトは開発中です。
